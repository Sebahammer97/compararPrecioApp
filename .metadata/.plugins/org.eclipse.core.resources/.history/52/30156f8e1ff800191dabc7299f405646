package test;

import java.util.ArrayList;
import java.util.List;

import controlador.Controlador;
import daos.CadenaDAO;
import daos.LocalDAO;
import daos.ProductoDAO;
import daos.ProductoPrecioDAO;
import exceptions.CadenaException;
import exceptions.LocalException;
import exceptions.ProductoException;
import exceptions.ProductoPrecioException;
import modelo.Cadena;
import modelo.ItemLista;
import modelo.Lista;
import modelo.Local;
import modelo.Producto;
import modelo.ProductoPrecio;
import procesado.CompraDecision;
import procesado.ItemResultado;
import procesado.ProcesadorDeListas;

public class Test {

	public static void main(String[] args) throws LocalException, CadenaException, ProductoPrecioException, ProductoException {

		/*
		for(Local l: LocalDAO.getInstancia().getLocales())
		{	
			System.out.println(""+l.getId()+" | "+l.getCadena().getNombre()+"");
		}

		System.out.println("-------------------------------------------------------");
		System.out.println("-------------------------------------------------------");
		for(Producto p: ProductoDAO.getInstancia().getProductos())
		{	
			System.out.println(""+p.getNombre()+"");
		}
		System.out.println("-------------------------------------------------------");
		System.out.println("-------------------------------------------------------");
		for(ProductoPrecio pp: ProductoPrecioDAO.getInstancia().getProductoPrecioByLocal(1))
		{	
			System.out.println(""+pp.getId()+" | "+pp.getLocal().getId()+" | "+pp.getProducto().getId()+"");
		}
		System.out.println("-------------------------------------------------------");
		System.out.println("-------------------------------------------------------");
		 */
/*
		for(Local l: LocalDAO.getInstancia().getLocales())
		{	
			System.out.print(l.getListado().size());
			l.cargarListadoDePrecios();
			System.out.println(" | "+l.getListado().size());
			System.out.println("-------------------------------------------------------");
			
		}
*/	
		/*
		Lista lc = new Lista();
		for(int i = 1; i <5; i++)
		{
			lc.addItemListaCompra((new ItemLista(new Producto(i,""+i+""), 1)));	
		}

		ItemResultado resultado = Controlador.getInstancia().procesarListaCompra(lc);

		System.out.println("-------------------------------------------------------");	
		System.out.println("Mejor Ruta:\t"+resultado.getLocal().getNombre()+"\t"+resultado.getPresupuesto()+"\t"+resultado.getLocal().getDistancia()+"");

		System.out.println("-------------------------------------------------------");	
*/
		List<Producto> productos = ProductoDAO.getInstancia().getProductos();
		List<Local> locales = LocalDAO.getInstancia().getLocales();
		
		for(Local l: locales)
		{
			l.cargarListadoDePrecios();
		}
		
		ArrayList<ItemLista> listado = new ArrayList<ItemLista>();
		listado.add(new ItemLista(0, productos.get(0), 1));
//		listado.add(new ItemLista(0, productos.get(1), 1));
		
		
		Lista lc = new Lista(0, "010", "testeo", listado);
		
		ArrayList<CompraDecision> test1 = ProcesadorDeListas.getInstancia().procesarListaMejorPrecioMonoLocal(lc, locales);
		for(CompraDecision i: test1)
		{
			System.out.println(i.contarDecision());
		}

		System.out.println("-------------------------------------------------------");	

		ArrayList<CompraDecision> test2 = ProcesadorDeListas.getInstancia().procesarListaMejorPrecioOptimo(lc, locales);
		for(CompraDecision i: test2)
		{
			System.out.println(i.contarDecision());
		}
	}

}
